<ion-view view-title="Handbook" >
    <div class="visual-header"></div>
	<div class="content-page">
		<div class="logo">
	        <a ng-if="org.logo"><img alt="{{org.name}}" ng-src="{{org.logo}}"></a>
	    </div>
        <div ng-include="'templates/menu_tabs.html'"></div>
	    <div class="list list-inset">
		  <label class="item item-input">
		    <i class="icon ion-search placeholder-icon"></i>
		    <input type="text" placeholder="Search" ng-model="searchText">
		  </label>
		</div>
        <div class="row" ng-if="!handbook" >
            <div class="col">No data found!</div>
        </div>
		<div class="row" ng-if="handbook" ng-hide="searchText">
			<div class="col">{{handbook.title}} Version {{handbook.version}},  {{handbook.year}}, {{handbook.language}} Version</div>
		</div>
		<div class="row" ng-hide="searchText">
			<div class="col" ng-bind-html="handbook.description"></div>
		</div>
        <div class="list menu-tab-page">
        	<div ng-repeat="(key, section) in sections | filter:searchText">
        		<div class="item item-divider item-icon-left"
                    ng-click="toggleGroup(section)"
                    ng-class="{active: isGroupShown(section)}">
					<h4 class="sec-title">
                        {{key + 1}}. {{section.title}}
					    <i class="icon"
                        ng-class="isGroupShown(section) ? 'ion-ios-minus-outline' : 'ion-ios-plus-outline'"
                        ng-if="(section.description.length > 0 || (section.children.length > 0))"
                        ></i>
                    </h4>
				</div>
				<div class="item"
                    ng-show="isGroupShown(section)" >
                    <div class="section-ct"
                        ng-show="section.description"
                        ng-class="(section.children.length > 0 && child.id > 0) ? '' : 'no-child'"
                        ng-bind-html="section.description"
                        ></div>
                    <div class="sub-section"
                        ng-if="section.children.length > 0 && child.id > 0"
                        ng-repeat="(k, child) in section.children"
                        >
                        <h4 ng-click="toggleSubGroup(child)">{{key + 1}}.{{k + 1}} - {{child.title}}</h4>
                        <div class="sub-section-ct" ng-bind-html="child.description" ng-show="isSubGroupShown(child)"></div>
                    </div><!-- SUB SECTIONS -->
                </div>
        	</div>
		</div>
	</div>
</ion-view>
